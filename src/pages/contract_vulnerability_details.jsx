import './contract_vulnerability_details.scss';
import React from "react";
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faHeart,  } from '@fortawesome/free-regular-svg-icons';
import { faHeart as faHeartFilled, faArrowLeft } from '@fortawesome/free-solid-svg-icons';
import { Tab, Tabs, TabList, TabPanel } from 'menora-react-tabs';

const VulnerabilityDetails = ({vulnerability, back, like_vulnerability, scan_vulnerability}) => {
  const vulnerability_title = vulnerability.title

  const formatted_risk_matrix = vulnerability.matrix.map(matrix => (
    <div key={matrix.title} className='risk_matrix_item'>
      <span>{matrix.reading}</span> - <span>{matrix.title}</span>
    </div>
  ));

  const tabs = vulnerability.description
  var formatted_tabs_list = tabs.map(tab => (
    <Tab key={tab.title}>{tab.title}</Tab>
  ));
  formatted_tabs_list = <TabList>{formatted_tabs_list}</TabList>
  const formatted_tabs_panel = tabs.map(tab => (
    <TabPanel key={tab.title}>
      <p>{tab.content}</p>
    </TabPanel>
  ));
  
  return (
    <div className="vulnerability_details_container">
      <header className="vulnerability_details_header">
        <FontAwesomeIcon 
          icon={faArrowLeft}
          className="back"
          onClick={() => back()}
          />
        <h3>{vulnerability_title}</h3>
        <div className='risk_matrix_container'>
          <span className='left'>Risk Classification Metrix</span>
          <span className='right'>Risk Chart</span>
          <div className='risk_matrix'>
            {formatted_risk_matrix}
          </div>
        </div>
        <div className='action'>
          <div className="like" /*style={{display: "none"}}*/>
            <FontAwesomeIcon 
              icon={faHeart}
              onClick={() => like_vulnerability(vulnerability.id)}
              />
          </div>
          <button onClick={() => scan_vulnerability(vulnerability.id)}>Start Scanning</button>
        </div>
      </header>

      <Tabs>
        {formatted_tabs_list}
        {formatted_tabs_panel}
      </Tabs>
    </div>
  )
}

export default VulnerabilityDetails;